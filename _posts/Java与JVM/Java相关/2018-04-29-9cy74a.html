---
layout: post
publishTime: 2018-04-29
category: Java与JVM
tags: [Java相关, 动态代理]
---

<div style="border:1px solid #3c763d; padding:0 8px; margin:0 -8px;" onclick="$('#e8c3cv').fadeToggle(100);"><p><strong>题干=</strong></p><p>CGlib原理是什么，为什么CGlib方式可以对接口实现代理？</p><p>CGlib动态代理和JDK动态代理的主要区别是什么？</p></div><div id="e8c3cv" style="display:none;border:1px solid #317090; border-top-color:#aabaaa; padding:0 8px; margin:0 -4px;"><p><strong>答案=</strong></p><p>CGlib原理为：在运行时动态生成代理类（该类继承了原有操作类），底层是使用ASM动态生成了一个新类字节码。</p><p>区别：<strong>1.</strong>CGLib创建的动态代理对象性能比JDK创建的动态代理对象的性能高不少，<strong>2.</strong>但是CGLib在创建代理对象时所花费的时间却比JDK多得多，所以对于单例的对象，因为无需频繁创建对象，用CGLib合适，反之，使用JDK方式要更为合适一些。<strong>3.</strong>同时，由于CGLib由于是采用动态创建子类的方法，对于final方法，无法进行代理。</p><p style='line-height: 1;'><br/></p></div>