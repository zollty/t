---
layout: post
publishTime: 2018-05-02
category: 未分类
tags: 位运算
---

<div style="border:1px solid #3c763d; padding:0 8px; margin:0 -8px;" onclick="$('#z5659z').fadeToggle(100);"><p><strong>题干=</strong></p><p>用最有效率的方法算出2乘以8等于几?</p></div><div id="z5659z" style="display:none;border:1px solid #317090; border-top-color:#aabaaa; padding:0 8px; margin:0 -4px;"><p><strong>答案=</strong></p><p>2 &lt;&lt; 3，</p><p>因为将一个数左移n位，就相当于乘以了2的n次方，那么，一个数乘以8只要将其左移3位即可，而位运算cpu直接支持的，效率最高，所以，2乘以8等于几的最效率的方法是2 &lt;&lt; 3。</p><p style='line-height: 1;'><br/></p></div><div style="border:1px solid #3c763d; padding:0 8px; margin:0 -8px;" onclick="$('#zuaky2').fadeToggle(100);"><p><strong>题干=</strong></p><p>用最有效率的方法算出2的n次方等于几？</p></div><div id="zuaky2" style="display:none;border:1px solid #317090; border-top-color:#aabaaa; padding:0 8px; margin:0 -4px;"><p><strong>答案=</strong></p><p>1 &lt;&lt; n，将一个数左移n位，就相当于乘以了2的n次方。注意此处 n&lt;=30，因为Integer.MAX_VALUE=2^31-1，n如果=31，那么1&lt;&lt;n就大于&nbsp;Integer.MAX_VALUE了。</p><p>故正确答案为：</p><p>1&lt;&lt;n，n=[0,30]</p><p>1L&lt;&lt;n，n=[0, 62]</p><p>例如：<br/></p><p>1&lt;&lt;20 ==&nbsp;(int)Math.pow(2, 20)</p><p>1L&lt;&lt;40 ==&nbsp;(long)Math.pow(2, 40)</p><p style='line-height: 1;'><br/></p></div><div style="border:1px solid #3c763d; padding:0 8px; margin:0 -8px;" onclick="$('#4ey6zc').fadeToggle(100);"><p><strong>题干=</strong></p><p>表达式：n &amp;&nbsp;0X1F 的意思是什么？ 如果n=23或者83，那么其值等于多少？</p></div><div id="4ey6zc" style="display:none;border:1px solid #317090; border-top-color:#aabaaa; padding:0 8px; margin:0 -4px;"><p><strong>答案=</strong></p><p>0X1F是十六进制，</p><p>二进制：0101 = 1*2^0 + 1*2^2 = 5</p><p>十进制：106 = 6*10^0 + 1*10^2 = 106</p><p>所以十六进制：0X1F = 15*16^0 + 1*16^1 = 31</p><p>0X1F 换算成 二进制，就是 0001 1111（5个1） = 1 + 2 + 4+ 8 + 16 = 31</p><p>n &amp;&nbsp;0X1F，位“与”运算，<strong>就是把 n 的二进制位的前3位，置为0，只保留后5位</strong>。因此</p><p>23 &amp; 0X1F = 23（23小于5位，完整保留下来）</p><p>35 &amp; 0X1F = （32 + 3）&amp; 0X1F，因为只保留后5位，而32是第6位，应该忽略，所以结果=3</p><p>83 &amp; 0X1F = （64 + 19）&amp; 0X1F，同理，64是第7位，应该忽略，所以结果=19</p><p>不难发现，n &amp; 0X1F 运算，相当于 （32*k + n%32） &amp;&nbsp;0X1F，抹去前面的32的倍数，实际<strong>等于 n%32 取余数</strong>。</p><p>&nbsp;</p><p style='line-height: 1;'><br/></p></div><div style="border:1px solid #3c763d; padding:0 8px; margin:0 -8px;" onclick="$('#gz7cx2').fadeToggle(100);"><p><strong>题干=</strong></p><p>下面三个表达式的含义是什么（i是一个无符号整数）？</p><ol class=" list-paddingleft-2" style="list-style-type: decimal;"><li><p>a[i&gt;&gt;5] |=&nbsp; (1&lt;&lt;(i &amp; 0X1F));</p></li><li><p>a[i&gt;&gt;5] &amp;= ~(1&lt;&lt;(i &amp; 0X1F));</p></li><li><p>a[i&gt;&gt;5] &amp; (1&lt;&lt;(i &amp; 0X1F));</p></li></ol></div><div id="gz7cx2" style="display:none;border:1px solid #317090; border-top-color:#aabaaa; padding:0 8px; margin:0 -4px;"><p><strong>分析=</strong></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p>i&gt;&gt;5，即i右移5位，i=31时为0，i=32时为1，i=33时为1，i=64时为2，相当于 i 除以 2^5 = 32；</p></li><li><p>1&lt;&lt;n，相当于 把 1的二进制左移n位，例如n=1，那么1&lt;&lt;1等于2，也就是相当于 2^n&nbsp;</p><p><em>（注意：如果是有符号整数，则n&lt;=30，因为如果Integer.MAX_VALUE=2^31-1）；</em></p></li><li><p>i &amp; 0X1F，即保留 i 二进制的后5位，相当于 i %32 取余数;</p></li></ul><p style='line-height: 1;'><br/></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p>a = <strong>a &amp; ~(1&lt;&lt;k)</strong>：代表 将int型变量a的<strong>第k位</strong> 清0<strong>（k从0数起）</strong>；</p></li><li><p>a = <strong>a | (1&lt;&lt;k)</strong>：代表 将int型变量a的<strong>第k位</strong> 变为1<strong>（k从0数起）</strong>。</p></li></ul><p>参见：<a href="https://blog.csdn.net/hguisu/article/details/7892596" target="_blank">位运算符及其应用</a></p><p style='line-height: 1;'><br/></p><p><strong>答案=</strong></p><p>表达式1，相当于 a[i/32] =&nbsp;a[i/32] | ( 1&lt;&lt;(i%32) )，即<strong>将 a[i/32] 的第 i%32 位&nbsp; 变为1</strong></p><p>——假设i=3，那么就是将 a[0] 的 第 3 位（a[0][3]）变为1；</p><p>——假设i=35，那么就是将a[1] 的第 3位（a[0][3]）变为1。</p><p>注意到，该表达式，i值必须是 unsigned int，如果是Java的Integer，则1&lt;&lt;M，M=[0,31]则会超出Integer的最大范围。</p><p>同理，表达式2的意思是 <strong>将a[i/32] 的第 i%32 位&nbsp; 清0</strong>，</p><p>——假设i=3，那么就是将 a[0] 的 第 3 位（a[0][3]）变为0；</p><p>——假设i=35，那么就是将a[1] 的第 3位（a[0][3]）变为0。</p><p>表达式3，相当于 a[i/32] =&nbsp;a[i/32] &amp; ( 2^(i%32) )，而2^(i%32)二进制表示为只有第(i%32)位为1，其余各位为0，那么表达式3的意思是，只保留 a[i/32] 二进制的 第 i%32 位，其余各位清零。<br/></p><p>——假设i=3，那么就是保留 a[0] 二进制的 第 3 位（a[0][3]），其余各位变为0；</p><p>——假设i=35，那么就是保留将a[1] 二进制的 第 3 位（a[0][3]），其余各位变为0。</p><p style='line-height: 1;'><br/></p><p>参考资料：</p><p><a href="https://blog.csdn.net/hguisu/article/details/7892596" target="_blank">位运算符及其应用</a> </p><p style='line-height: 1;'><br/></p><p style='line-height: 1;'><br/></p></div>