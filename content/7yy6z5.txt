<p>题干=</p><p>数据表新增了一列，怎么把另一列的值，赋值给这一列？</p><p>如下，user_level表，有level6字段，现在新增了level10字段，要把level6的值赋值给level10</p><p>TABLE [user_level] (&nbsp;level6, level10 )</p><p><br/></p><p>答案=</p><p>update user_level set level10=level6;</p><p><br/></p><p>题干=</p><p>补数据问题</p><p>表一</p><p>mk_service</p><p>--------------------------</p><p>task_id，accept_time</p><p>表二</p><p>mk_task_info</p><p>--------------------------</p><p>task_id，accept_sl_time</p><p>表一里面有部分数据异常，accept_time的值为空，现在要紧急修复，把accept_time的值补上。恰好在表二中，有与表一对应task_id的accept_time的值，名为accept_sl_time，问，如何才能把表二的accept_sl_time，赋值给表一的accept_time？</p><p><br/></p><p>分析=</p><p>两张表联合，先用关联字段task_id做子查询，然后再update</p><p><br/></p><p>答案=</p><pre class="brush:sql;toolbar:false">UPDATE&nbsp;mk_service&nbsp;a,&nbsp;
(SELECT&nbsp;*&nbsp;FROM&nbsp;mk_task_info&nbsp;where&nbsp;task_id&nbsp;in&nbsp;
&nbsp;&nbsp;(SELECT&nbsp;task_id&nbsp;FROM&nbsp;mk_service&nbsp;where&nbsp;isaccept_time=0))&nbsp;b&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SET&nbsp;a.isaccept_time=b.isaccept_sl_time&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;a.isaccept_time=0&nbsp;and&nbsp;a.task_id=b.task_id;</pre><p><br/></p><p>题干=</p><p>查找重复数据项</p><p>在Table_A表中存在一个字段“name”，而且不同记录之间的“name”值有可能会相同，</p><p>现在就是需要查询出在该表中的各记录之间“name”值存在重复的项，请写出SQL。</p><p><br/></p><p>分析=</p><p>&nbsp; &nbsp; 第一步，查出重复的name的值，第二步，根据这些name值查找对应的数据。</p><p>select &nbsp;name, count(*) as cf_times from&nbsp;Table_A&nbsp;group&nbsp;by name&nbsp;having&nbsp;count(*)&nbsp;&gt;&nbsp;1</p><p>select&nbsp;*&nbsp;from&nbsp;Table_A where &nbsp;name&nbsp;in (查询到的name)</p><p><br/></p><p>答案=</p><p>方法一：&nbsp;</p><pre class="brush:sql;toolbar:false">select&nbsp;*&nbsp;from&nbsp;Table_A&nbsp;where&nbsp;name&nbsp;
&nbsp;&nbsp;in&nbsp;(select&nbsp;name&nbsp;from&nbsp;Table_A&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group&nbsp;by&nbsp;name&nbsp;having&nbsp;count(*)&nbsp;&gt;&nbsp;1);</pre><p>方法二：&nbsp;</p><pre class="brush:sql;toolbar:false">select&nbsp;T.*&nbsp;from&nbsp;Table_A&nbsp;as&nbsp;T&nbsp;
&nbsp;&nbsp;join&nbsp;(select&nbsp;name&nbsp;from&nbsp;Table_A&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group&nbsp;by&nbsp;name&nbsp;having&nbsp;count(*)&nbsp;&gt;&nbsp;1)&nbsp;as&nbsp;T2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;T.name=T2.name;</pre><p>如果还查性别也相同（名字和性别都相同），大则如下:</p><pre class="brush:sql;toolbar:false">select&nbsp;T.*&nbsp;from&nbsp;Table_A&nbsp;as&nbsp;T&nbsp;
&nbsp;&nbsp;join&nbsp;(select&nbsp;name,sex&nbsp;from&nbsp;Table_A&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group&nbsp;by&nbsp;name,sex&nbsp;having&nbsp;count(*)&nbsp;&gt;&nbsp;1)&nbsp;as&nbsp;T2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;T.name=T2.name&nbsp;and&nbsp;T.sex=T2.sex;</pre><p><br/></p><p>题干=</p><p>有一个树形结构的数据表Table_Dept，有id和parent_id字段，只有当节点没有子节点时才允许删除。请问这个根据id删除节点的SQL怎么写？</p><p><br/></p><p>答案=</p><pre class="brush:sql;toolbar:false">delete&nbsp;from&nbsp;Table_Dept&nbsp;t1&nbsp;where&nbsp;t1.id=9035&nbsp;and&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;(select&nbsp;count(1)&nbsp;as&nbsp;n&nbsp;from&nbsp;Table_Dept&nbsp;t2&nbsp;where&nbsp;t2.parent_id=9035)&nbsp;=&nbsp;0;</pre><p><br/></p>