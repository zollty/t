<p>题干=</p><p>停止一个永远循环运行的线程，一般采用什么方式？会有哪些问题？</p><p>答案=</p><p>一般采用boolean类型标识位，控制while循环来停在线程。要注意线程同步问题，建议标识位设置成volatile类型或者AtomicBoolean类型。</p><p>另一个问题是如果一次while循环一直阻塞，下一次while循环永远不会到来，那这种方式是不能停止线程的，只能采用强硬的stop、destroy方法或者kill -9大法。当然一般阻塞都有超时时间，首先应该检查是否设置了网络、IO等超时时间。【插曲：我曾经遇到过无限超时和业务上超时很长的情况，前者是在kafka consumer.close()时NIO处因为JDK的BUG导致close方法无限等待，后者是由于Servlet下载大数据报表，将Servlet的超时时间刻意设置成了60分钟，这么长的超时时间，如果要等待它结束确实有点不现实，于是最好的办法就是强行destroy】</p><p><br/></p><p>题干=</p><p>如果一个线程处于超时运行状态，比如处理IO和网络，很长时间都没处理完，从业务角度上看运行已经超时了，如何能尽快停止这些线程？</p><p>答案=</p><p>如果已经出现这种情况，只能强行中断了，比如kill、重启。</p><p>从设计的角度，应该为IO和网络操作设置合理的超时时间，建议在业务处理的各个环节，都关注超时如何处理，比如在while循环的时候，检查超时时间。</p><p><br/></p>