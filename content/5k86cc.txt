<p>题干=<br/></p><p>网桥（Bridge）的作用是什么？</p><p>答案=</p><p>网桥是连接两个局域网的一种存储/转发设备，是一种对帧进行转发的技术，根据MAC分区块，可隔离碰撞。网桥将网络的多个网段在数据链路层连接起来。</p><p><br/></p><p>Docker 服务默认会创建一个 docker0 网桥（其上有一个 docker0 内部接口），它在内核层连通了其他的物理或虚拟网卡，这就将所有容器和本地主机都放到同一个物理网络。</p><p>Docker 默认指定了 docker0 接口 的 IP 地址和子网掩码，让主机和容器之间可以通过网桥相互通信。</p><p>每次创建一个新容器的时候，Docker 从可用的地址段中选择一个空闲的 IP 地址分配给容器的 eth0 端口。</p><p>默认情况下，Docker 会将所有容器连接到由 docker0网桥 提供的虚拟子网中。但用户有时候需要两个容器之间可以直连通信，而不用通过主机网桥进行桥接。</p><p>参见：</p><p><a href="https://baijiahao.baidu.com/s?id=1587374536166303487&wfr=spider&for=pc">https://baijiahao.baidu.com/s?id=1587374536166303487&amp;wfr=spider&amp;for=pc</a></p><p><a href="https://baike.baidu.com/item/%E7%BD%91%E6%A1%A5">https://baike.baidu.com/item/%E7%BD%91%E6%A1%A5</a></p><p><br/></p><p>题干=</p><p>IP地址由哪两部分组成？分别是什么含义？</p><p>答案=</p><p>IP地址由两部分组成，即网络号（Network ID）和主机号（Host ID）。</p><p>网络号标识的是Internet上的一个子网，而主机号标识的是子网中的某台主机。</p><p><br/></p><p>题干=</p><p>什么是子网和子网掩码？点到点的通信链路需要子网和子网掩码吗？</p><p>答案=</p><p>点到点链路不需要子网和子网掩码。</p><p><br/></p><p>子网概念：</p><p>对于一般<em>由路由器和主机组成的互连系统</em>，我们可以使用下列方法定义系统中的子网。</p><p>为了确定网络区域，分开主机和路由器的每个接口，从而产生了若干个分离的网络岛，接口端连接了这些独立网络的端点。这些独立的网络岛叫做子网(subnet)。</p><p>（读到这里，可能还需要明白“路由器和交换机的区别”？路由器划分了多个子网，交换机需要为每个子网络提供更多的连接端口，并分配网络数据）</p><p>参见：<a href="https://baike.baidu.com/item/%E5%AD%90%E7%BD%91">https://baike.baidu.com/item/%E5%AD%90%E7%BD%91</a></p><p><br/></p><p>IP地址是以网络号和主机号来标示网络上的主机的，我们把网络号相同的主机称之为本地网络，网络号不相同的主机称之为远程网络主机，本地网络中的主机可以直接相互通信；远程网络中的主机要相互通信必须通过本地网关（Gateway）来传递转发数据。</p><p>先看子网掩码的作用：</p><p>①、子网掩码（Subnet Mask）又叫网络掩码、地址掩码，必须结合IP地址一起对应使用。</p><p>②、只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。</p><p>③、子网掩码和IP地址做“与”运算，<span style="color: rgb(192, 0, 0);"><em>分离出IP地址中的网络地址和主机地址</em></span>，用于判断该IP地址是在本地网络上，还是在远程网络网上。</p><p>④、子网掩码还用于将网络进一步划分为若干子网，以避免主机过多而拥堵或过少而IP浪费。</p><p>子网掩码可以分离出IP地址中的网络地址和主机地址，那为什么要分离呢？因为两台主机要通信，首先要判断是否处于同一网段，即网络地址是否相同。如果相同，那么可以把数据包直接发送到目标主机，否则就需要路由网关将数据包转发送到目的地。</p><p><br/></p><p>题干=</p><p>网卡有个MTU（接口允许接收的最大传输单元）参数，其作用是什么？</p><p>答案=</p><p>参见：https://baike.baidu.com/item/mtu/508920?fr=aladdin</p><p>以以太网传送IPv4报文为例。MTU表示的长度包含IP包头的长度，如果IP层以上的协议层发送的数据报文的长度超过了MTU，则在发送者的IP层将对数据报文进行分片，在接收者的IP层对接收到的分片进行重组。</p><p>这里举一个具体的例子说明IP包分片的原理。以太网的MTU值一般是1500 bytes，假设发送者的协议高层向IP层发送了长度为3008 bytes的数据报文，则该报文在添加20 bytes的IP包头后IP包的总长度是 3028 bytes，因为3028 &gt; 1500，所以该数据报文将被分片。</p><p><br/></p><p>因为协议数据单元的包头和包尾的长度是固定的，MTU越大，则一个协议数据单元的承载的有效数据就越长，数据包个数也越低，通信效率也越高。</p><p>但MTU也不是越大越好，因为MTU越大， 传送一个数据包的延迟也越大；并且MTU越大，数据包中 bit位发生错误的概率也越大。</p><p>MTU越大，通信效率越高而传输延迟增大，所以要权衡通信效率和传输延迟选择合适的MTU。</p><p><br/></p><p>题干=</p><p>路由器和交换机的主要区别是什么？它们各自工作在OSI网络模型的第几层？</p><p>答案=</p><p>交换机工作在OSI的第二层(数据链路层)</p><p>路由器工作在OSI的第三层(网络层)</p><p>路由器是利用不同网络的ID号(即IP地址)来确定数据转发的地址。</p><p>而交换机是利用物理地址（MAC地址）来确定转发数据的目的地址，同一个交换机下所有主机的IP地址是相同的。</p><p>更多区别参见：</p><p><a href="http://net.zol.com.cn/640/6403251.html">http://net.zol.com.cn/640/6403251.html</a></p><p><a href="http://network.51cto.com/art/201505/477755.htm">http://network.51cto.com/art/201505/477755.htm</a></p><p><br/></p><p>题干=</p><p>网桥和路由器的主要区别是什么？</p><p>答案=</p><p>根据上面的描述可知，网桥和路由器的功能类似，只不过网桥功能很简单。具体来说：</p><ol class=" list-paddingleft-2" style="list-style-type: decimal;"><li><p>网桥只能连接两个相同的网络，而路由器可以连接不同网络。</p></li><li><p>网桥通常只有两个端口，超过2个端口的网桥称为switch，而路由器可以最少是16口，最多可达48口。</p></li><li><p>网桥不隔离广播，而路由器可以隔离广播。</p></li><li><p>工作层次不同：网桥是第二层的设备，网桥不考虑用户在网上使用的协议，网桥可以不加选择的高速传输数据；而路由器是第三层的设备，知道网上传输数据使用的协议，可以对传输的数据进行控制(路由选择)，能按规则来决定将怎样处理特定的数据。</p></li></ol><p>参考资料：<br/></p><p><a href="http://product.pconline.com.cn/itbk/wlbg/network/1710/10194718.html">http://product.pconline.com.cn/itbk/wlbg/network/1710/10194718.html</a> </p><p><br/></p><p>题干=</p><p>网桥、网卡和网关的区别是什么？</p><p>答案=</p><ol class=" list-paddingleft-2" style="list-style-type: decimal;"><li><p>网桥，是把两个不同物理层，不同MAC子层，不同速率的局域网连接在一起。比如说10MB/S与100MB/S的局域网。因为它有储存转化功能。</p></li><li><p>网卡是电脑的一个接收信息 转换信息 暂储信息的一个硬件。它工作在物理层，是把接受到信息递交给其他设备(比如主板上的芯片)。</p></li><li><p>网关(Gateway)又称网间连接器、协议转换器。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关既可以用于广域网互连，也可以用于局域网互连。 网关是一种充当转换重任的计算机系统或设备。在使用不同的通信协议、数据格式或语言，甚至体系结构完全不同的两种系统之间，网关是一个翻译器。与网桥只是简单地传达信息不同，网关对收到的信息要重新打包，以适应目的系统的需求。同时，网关也可以提供过滤和安全功能。大多数网关运行在OSI 7层协议的顶层--应用层。</p></li></ol><p>所以生动的表示以下，网关是邮电局，所有的信息必须通过这里的打包、封箱、寻址，才能发出去与收进来；网卡是设备，也就是邮电局邮筒，你家的信箱；而网桥是邮递员，但他只负责一个镇里面(局域网)不负责广域网。</p><p><br/></p><p><strong>题干=</strong><br/></p><p>同一个局域网内，有两台服务器A和B，主机A不能连接外网，但是主机B可以。现在主机A上面的应用，想要通过主机B为跳板，访问外网ip0，该怎么办？</p><p><strong>答案=</strong></p><p>让主机B充当路由器的角色。这样A就能通过B访问外网了。</p><p>思路（未验证，只是我的一种想法）：</p><p>在 主机A中配置 iptables的NAT源地址转发，让主机A发起的<span style="color: rgb(192, 0, 0);">ip0</span>请求，能转发到B主机上，</p><p>这样，请求A主机的能够发送出去了。但是数据还不能返回到A机器，需要在B主机上配置路由规则，让ip1的数据路由到主机A。</p><p>假设主机A的ip地址是<span style="color: rgb(0, 176, 80);">ip1</span>，主机B的ip地址为p2，那么在B主机上配置路由规则如下：</p><p>$ route add -net <span style="color: rgb(192, 0, 0);">p0 </span>gw <span style="color: rgb(0, 176, 80);">p1 </span>或者 ip route add <span style="color: rgb(192, 0, 0);">p0 </span>via <span style="color: rgb(0, 176, 80);">p1</span></p><p>在A主机配置NAT规则如下：</p><p>$ iptables -t nat -A POSTROUTING -s <span style="color: rgb(192, 0, 0);">p0 </span>-d <span style="color: rgb(112, 48, 160);">p2 </span>-j MASQUERADE</p><p>注意，命令写得不一定正确（我对这几个命令不熟），但是思路应该是对的。</p><p>参考资料：《<a href="https://blog.csdn.net/lvshaorong/article/details/69950694" target="_self" title="Docker容器通过独立IP暴露给局域网的方法">Docker容器通过独立IP暴露给局域网的方法</a>》</p><p><br/></p>